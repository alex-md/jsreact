let e,t;let o=document.querySelector("#textToSpeechButton"),n=document.querySelector("#ttsAudio");function r(e){return/sk-[a-zA-Z0-9]{48}/.test(e)}function a(){var e=document.createElement("div");e.id="toastContainer",e.classList.add("position-fixed","bottom-0","start-0","p-3");var t=document.createElement("div");t.id="apiKeyToast",t.classList.add("toast"),t.setAttribute("role","alert"),t.setAttribute("aria-live","assertive"),t.setAttribute("aria-atomic","true");var o=document.createElement("div");o.classList.add("toast-header","bg-warning");var n=document.createElement("strong");n.classList.add("mr-auto"),n.textContent="Missing API Key";var r=document.createElement("button");r.type="button",r.classList.add("ml-2","mb-1","close","hidden"),r.setAttribute("data-bs-dismiss","toast"),r.setAttribute("aria-label","Close"),o.appendChild(n);var a=document.createElement("div");a.classList.add("toast-body","text-body-secondary"),a.textContent="Please enter a valid OpenAI API key.",t.appendChild(o),t.appendChild(a),e.appendChild(t),document.body.appendChild(e),new bootstrap.Toast(t).show()}o.addEventListener("click",function(){if(!e||!r(e)){a();return}console.log("start convertToSpeedch()"),fetch("https://api.openai.com/v1/audio/speech",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({model:"tts-1",input:document.getElementById("textToSpeechInput").value,voice:document.querySelector('input[name="voice"]:checked').value.toLowerCase()})}).then(e=>{if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return e.blob()}).then(e=>{let t=URL.createObjectURL(e);n.src=t,n.play()}).catch(e=>console.error("Error:",e))});let i=[],d=document.querySelector("#pressthenreleaseButton"),s=document.querySelector("#transcribedText");d.addEventListener("pointerdown",function(){if(!e||!r(e)){a();return}console.log("start rec"),s.innerHTML="start rec...",navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{(t=new MediaRecorder(e)).ondataavailable=e=>{i.push(e.data)},t.onstop=e=>{let t=new Blob(i,{type:"audio/wav"});i=[],function(e){let t=document.getElementById("speechToTextInput"),o=e||t.files[0],n="your_openai_api_key";if(!n||!r(n)){a();return}let i=new FormData;i.append("file",o),i.append("model","whisper-1"),fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${n}`},body:i}).then(e=>{if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>{let t=document.getElementById("transcribedText");t&&(t.innerText=e.text);let o=document.getElementById("textToSpeechInput");o&&(o.value=e.text),console.log(e)}).catch(e=>console.error("Error:",e))}(new File([t],"recordedAudio.wav",{type:"audio/wav"}))},t.start(),document.getElementById("recordingStatus").innerText="Recording...",document.getElementById("recordButton").innerText="Stop Recording"})}),d.addEventListener("pointerup",function(){if(!e||!r(e)){a();return}console.log("stop rec"),s.innerHTML="stop rec... wait to transcript",t.stop(),document.getElementById("recordingStatus").innerText="Not Recording",document.getElementById("recordButton").innerText="Start Recording"});
//# sourceMappingURL=tts.d227d167.js.map
